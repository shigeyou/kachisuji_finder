# UI再設計 比較資料 v2

## 1. 現状のページ構成

### ページ一覧（7ページ）

| ルート | ページ名 | 主な機能 |
|--------|----------|----------|
| `/` | ホーム | 6つのリンクを並べた入口ページ |
| `/explore` | 探索 | 問いを入力→AI戦略生成→採否 |
| `/core` | コア情報 | サービス・資産の登録 |
| `/swot` | SWOT分析 | 強み弱み機会脅威の分析 |
| `/ranking` | ランキング | 高スコア戦略の一覧 |
| `/learning` | 学習 | パターン抽出・進化生成 |
| `/history` | 履歴 | 過去の探索結果 |

### 現状のナビゲーション構造

```
        ┌─────────────────────────────────────┐
        │            ホーム (/)               │
        └─────────────────────────────────────┘
                         │
    ┌────────┬───────┬───┴───┬────────┬───────┐
    ▼        ▼       ▼       ▼        ▼       ▼
 探索     コア    SWOT   ランキング  学習    履歴
/explore  /core  /swot  /ranking  /learning /history
```

**問題点: 全ページが並列で、優先順位や流れが不明**

---

## 2. 現状の課題

### 2.1 ホームページの問題

| 問題 | 詳細 |
|------|------|
| 選択肢過多 | 6つの選択肢が並列で、迷う |
| 初回導線がない | 初めてのユーザーが何から始めるべきか不明 |
| 主機能が埋もれる | 「探索」が他と同格に見える |
| ステータスがない | 今までの活動状況が見えない |

### 2.2 ユーザー思考とのズレ

**ユーザーの自然な思考フロー:**
```
現状を把握する（SWOT） → 問いを立てる → 解決策を探す → 良いものを選ぶ → 深掘りする
```

**現状のUI:**
```
ホーム → どこに行く？ → 探索？コア？SWOT？ → 迷う
```

### 2.3 SWOTの軽視

**問題:** SWOTが探索と切り離されており、オプション扱いになっている

**あるべき姿:** SWOTは探索の土台であり、必ず参照されるべき
- SWOTなしで探索 = 足場なしで戦略を考えることになる
- 強み・機会を踏まえた問いでなければ、良い勝ち筋は出ない

### 2.4 機能の関係性が不明

- 「コア情報」を登録すると探索精度が上がることが伝わらない
- 「採否」→「学習」→「進化生成」の繋がりが見えない
- 「ランキング」と「履歴」の違いが分かりにくい

---

## 3. 設計原則

### 3.1 SWOTを中核に据える

```
【正しい戦略立案の流れ】

  ┌─────────────────┐
  │  SWOT（現状把握）│  ← 全ての起点
  └────────┬────────┘
           ▼
  ┌─────────────────┐
  │  問いを立てる    │  ← SWOTを踏まえて
  └────────┬────────┘
           ▼
  ┌─────────────────┐
  │  勝ち筋を探索    │  ← SWOTを文脈として注入
  └────────┬────────┘
           ▼
  ┌─────────────────┐
  │  評価・採否      │
  └────────┬────────┘
           ▼
  ┌─────────────────┐
  │  学習・進化      │
  └─────────────────┘
```

### 3.2 その他の原則

1. **タスク指向** - 「何をしたいか」から始まる
2. **段階的開示** - 必要な時に必要な機能だけ見せる
3. **ガイド付き** - 次に何をすべきか明示
4. **フィードバック** - 活動の成果が見える

---

## 4. SWOT の仕様

### 4.1 基本方針

| 項目 | 仕様 |
|------|------|
| デフォルトSWOT | DBに1件だけ保存 |
| 管理者 | 開発者が開発プラットフォームから保存・更新 |
| ユーザー操作 | 閲覧のみ（編集不可） |
| 一時的な再分析 | 可能（ただしDBには保存されない） |
| 履歴 | 保存しない |
| 保存したい場合 | ユーザーが自分でダウンロード（PDF/JSON） |
| 探索時 | デフォルトSWOTを自動で文脈に注入 |

### 4.2 DB設計

```prisma
model DefaultSwot {
  id            String   @id @default("default")  // 常に1レコード
  strengths     String   // 強み（JSON配列）
  weaknesses    String   // 弱み（JSON配列）
  opportunities String   // 機会（JSON配列）
  threats       String   // 脅威（JSON配列）
  summary       String?  // 1ページサマリー
  updatedAt     DateTime @updatedAt
  updatedBy     String?  // 更新者（開発者名）
}
```

### 4.3 ユーザーから見たフロー

```
┌─────────────────────────────────────────────────────────┐
│  ダッシュボード                                         │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  Step 1: 現状を確認                              │   │
│  │                                                  │   │
│  │  💪強み: データ連携基盤、顧客基盤、技術力...     │   │
│  │  😓弱み: 人材不足、ブランド認知...               │   │
│  │  🚀機会: 生成AIブーム、脱炭素需要...             │   │
│  │  ⚠️脅威: 競合参入、規制強化...                   │   │
│  │                                                  │   │
│  │  [詳細を見る]  [📥ダウンロード]                  │   │
│  │  最終更新: 2024/01/15 by 管理者                  │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
│  ┌─────────────────────────────────────────────────┐   │
│  │  Step 2: 問いを立てる                            │   │
│  │                                                  │   │
│  │  [________________________]                      │   │
│  │                                                  │   │
│  │  💡 SWOTから問いの候補:                          │   │
│  │  • 強み×機会:「データ基盤×AIで新事業を？」       │   │
│  │  • 弱み×機会:「人材不足でもAI活用するには？」    │   │
│  │  • 強み×脅威:「技術力で競合に勝つには？」        │   │
│  │                                                  │   │
│  │                        [探索する →]              │   │
│  └─────────────────────────────────────────────────┘   │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

### 4.4 一時的な再分析（オプション）

ユーザーが「今の状況でSWOTを再分析したい」場合：

```
┌─────────────────────────────────────────────────────────┐
│  SWOT再分析（一時的）                                   │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ⚠️ この結果は保存されません。                          │
│     保存したい場合はダウンロードしてください。          │
│                                                         │
│  業界・市場: [________________]                         │
│  追加の文脈: [________________]                         │
│                                                         │
│  [SWOT分析を実行]                                       │
│                                                         │
│  ─────────────────────────────────────────────────────  │
│  【結果】                                               │
│  💪強み: ...                                            │
│  ...                                                    │
│                                                         │
│  [この結果で探索する]  [📥ダウンロード]  [戻る]         │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 5. 提案: 新しいページ構成

### 5.1 ページ一覧（5ページ）

| ルート | ページ名 | 役割 |
|--------|----------|------|
| `/` | ダッシュボード | SWOT確認 + 問い入力 + 活動サマリー |
| `/results/[id]` | 結果詳細 | 戦略の確認・採否 |
| `/strategies` | 戦略一覧 | 採用戦略 + ランキング + 進化 |
| `/insights` | インサイト | 履歴 + 学習パターン + メタ分析 |
| `/settings` | 設定 | コア情報 + スコア重み + 外観設定 |

### 5.2 新しいナビゲーション構造

```
┌─────────────────────────────────────────────────────────┐
│  ダッシュボード (/)                                     │
│                                                         │
│  [SWOT確認] → [問いを入力] → [探索実行]                │
│                                                         │
└───────────────────────────┬─────────────────────────────┘
                            │
                            ▼ 探索完了
┌─────────────────────────────────────────────────────────┐
│  結果詳細 (/results/[id])                               │
│                                                         │
│  - 戦略一覧（SWOTとの関連表示）                         │
│  - 採否ボタン                                           │
│  - 次のアクション提示                                   │
│                                                         │
└───────────────────────────┬─────────────────────────────┘
                            │
        ┌───────────────────┴───────────────────┐
        ▼                                       ▼
┌───────────────────────┐           ┌───────────────────────┐
│ 戦略一覧 (/strategies)│           │ インサイト (/insights)│
│                       │           │                       │
│ - 採用した戦略        │           │ - 探索履歴            │
│ - ランキング          │           │ - 学習パターン        │
│ - 進化生成            │           │ - メタ分析            │
└───────────────────────┘           └───────────────────────┘

┌─────────────────────────────────────────────────────────┐
│  設定 (/settings)                                       │
│                                                         │
│  - コア情報（サービス・資産）                           │
│  - スコア重み付け                                       │
│  - 外観設定（ダークモード等）                           │
│  ※ デフォルトSWOTは開発者のみ更新可能                  │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 6. ページ別 詳細設計

### 6.1 ダッシュボード (`/`)

**役割:** SWOT確認 + 問い入力 + 活動サマリー

**レイアウト:**
```
┌──────────────────────────────────────────────────────────┐
│ 勝ち筋ファインダー             [戦略] [インサイト] [⚙️] │
├──────────────────────────────────────────────────────────┤
│                                                          │
│  ┌────────────────────────────────────────────────────┐ │
│  │  📊 現状認識（SWOT）           [詳細] [📥]         │ │
│  │  ──────────────────────────────────────────────── │ │
│  │  💪 データ連携基盤、顧客基盤、海運ノウハウ        │ │
│  │  🚀 生成AIブーム、脱炭素需要、物流DX              │ │
│  │  ──────────────────────────────────────────────── │ │
│  │  最終更新: 2024/01/15                             │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
│  ┌────────────────────────────────────────────────────┐ │
│  │  💭 問いを立てる                                   │ │
│  │  ┌──────────────────────────────────────────────┐ │ │
│  │  │ 例: 生成AIで新規事業を立ち上げるには？       │ │ │
│  │  └──────────────────────────────────────────────┘ │ │
│  │                                                    │ │
│  │  💡 SWOTからの問い候補:                           │ │
│  │  ┌──────────────────────────────────────────────┐ │ │
│  │  │ • データ基盤を活かしたAI事業の可能性は？     │ │ │
│  │  │ • 脱炭素需要に応える新サービスとは？         │ │ │
│  │  │ • 競合のDX参入にどう対抗する？               │ │ │
│  │  └──────────────────────────────────────────────┘ │ │
│  │                                                    │ │
│  │  [一時的にSWOT再分析する]       [探索する →]      │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
│  ─────────────────────────────────────────────────────── │
│                                                          │
│  📈 あなたの活動                                         │
│  ┌────────────┐ ┌────────────┐ ┌────────────┐          │
│  │ 探索 12回  │ │ 採用 23件  │ │ 採用率 38% │          │
│  └────────────┘ └────────────┘ └────────────┘          │
│                                                          │
│  🔥 最近採用した戦略                                     │
│  • データ連携プラットフォーム構築 (4.2)                  │
│  • AI予測保全サービス (4.0)                              │
│  [すべて見る →]                                          │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

### 6.2 結果詳細 (`/results/[id]`)

**役割:** 戦略の確認・採否

**レイアウト:**
```
┌──────────────────────────────────────────────────────────┐
│ ← ダッシュボード    結果詳細    [📤] [🔊]               │
├──────────────────────────────────────────────────────────┤
│                                                          │
│  📝 問い                                                │
│  「生成AIで新規事業を立ち上げるには？」                  │
│                                                          │
│  📊 参照したSWOT                                        │
│  💪 データ連携基盤、顧客基盤  🚀 生成AIブーム、脱炭素   │
│                                                          │
│  ─────────────────────────────────────────────────────── │
│                                                          │
│  15件の戦略  [カード表示] [ランキング表]                 │
│                                                          │
│  ┌────────────────────────────────────────────────────┐ │
│  │ #1  AIチャットボット導入支援                       │ │
│  │     スコア: 4.2 / 5.0   [優先投資]                 │ │
│  │ ────────────────────────────────────────────────  │ │
│  │ なぜ勝てる:                                       │ │
│  │ 既存顧客基盤（強み）× 生成AI需要（機会）を活用   │ │
│  │                                                    │ │
│  │ 実現ステップ:                                     │ │
│  │ 1. パイロット顧客3社選定  2. PoC実施...          │ │
│  │                                                    │ │
│  │     [✓ 採用]    [✗ 却下]    [− 保留]             │ │
│  │     理由: [____________________]                  │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
│  ┌────────────────────────────────────────────────────┐ │
│  │ #2  データ分析プラットフォーム                     │ │
│  │     ...                                            │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
│  ─────────────────────────────────────────────────────── │
│  採否状況: ✓採用 3  ✗却下 5  −未評価 7                  │
│                                                          │
│  [新しい探索]  [戦略一覧へ]  [インサイトへ]             │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

### 6.3 戦略一覧 (`/strategies`)

**役割:** 採用戦略 + ランキング + 進化生成

**レイアウト:**
```
┌──────────────────────────────────────────────────────────┐
│ 戦略一覧                                       [⚙️]     │
├──────────────────────────────────────────────────────────┤
│                                                          │
│  [採用した戦略]   [ランキング]   [進化生成]              │
│  ═══════════════                                         │
│                                                          │
│  採用した戦略（23件）                                    │
│                                                          │
│  ┌────────────────────────────────────────────────────┐ │
│  │ データ連携プラットフォーム構築                     │ │
│  │ スコア: 4.2  採用日: 2024/01/15                   │ │
│  │ 元の問い:「DXで競争優位を築くには？」             │ │
│  │ SWOT関連: 💪データ基盤 × 🚀物流DX需要            │ │
│  │                                                    │ │
│  │ [詳細]  [進化させる]                              │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
│  ┌────────────────────────────────────────────────────┐ │
│  │ AI予測保全サービス                                │ │
│  │ ...                                                │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

### 6.4 インサイト (`/insights`)

**役割:** 履歴 + 学習パターン + メタ分析

**レイアウト:**
```
┌──────────────────────────────────────────────────────────┐
│ インサイト                                     [⚙️]     │
├──────────────────────────────────────────────────────────┤
│                                                          │
│  [探索履歴]   [学習パターン]   [メタ分析]                │
│  ══════════                                              │
│                                                          │
│  探索履歴（12回）                      [📤CSV] [📤JSON]  │
│                                                          │
│  📅 2024/01/20                                           │
│  ┌────────────────────────────────────────────────────┐ │
│  │ 「生成AIで新規事業を...」                          │ │
│  │ 15戦略 → ✓採用3 / ✗却下5 / −保留7                │ │
│  │                                                    │ │
│  │ [結果を見る]                                      │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
│  📅 2024/01/18                                           │
│  ┌────────────────────────────────────────────────────┐ │
│  │ 「脱炭素で新たな収益源を...」                      │ │
│  │ ...                                                │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

### 6.5 設定 (`/settings`)

**役割:** コア情報 + スコア重み + 外観設定

**レイアウト:**
```
┌──────────────────────────────────────────────────────────┐
│ 設定                                                     │
├──────────────────────────────────────────────────────────┤
│                                                          │
│  [コア情報]   [スコア設定]   [外観]                      │
│  ══════════                                              │
│                                                          │
│  コア情報                            [📤CSV] [📥CSV]    │
│                                                          │
│  登録したサービス・資産は探索時に自動参照されます        │
│                                                          │
│  ┌────────────────────────────────────────────────────┐ │
│  │ + サービスを追加                                   │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
│  ┌────────────────────────────────────────────────────┐ │
│  │ データ連携基盤サービス                [編集] [削除]│ │
│  │ カテゴリ: IT基盤                                  │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
│  ┌────────────────────────────────────────────────────┐ │
│  │ 顧客管理システム                      [編集] [削除]│ │
│  │ カテゴリ: IT基盤                                  │ │
│  └────────────────────────────────────────────────────┘ │
│                                                          │
│  ─────────────────────────────────────────────────────── │
│  ℹ️ デフォルトSWOTは管理者のみ更新可能です               │
│                                                          │
└──────────────────────────────────────────────────────────┘
```

---

## 7. 新旧ページ対応表

| 現状 | 新設計 | 変更内容 |
|------|--------|----------|
| `/` (ホーム) | `/` (ダッシュボード) | SWOT確認 + 問い入力中心に再設計 |
| `/explore` (探索) | `/results/[id]` | 入力は `/` へ、結果のみ独立ページ |
| `/swot` (SWOT) | `/` に統合 | ダッシュボードに常時表示 |
| `/core` (コア情報) | `/settings` | 設定ページのタブに統合 |
| `/ranking` (ランキング) | `/strategies` | 戦略一覧のタブに統合 |
| `/learning` (学習) | `/strategies` + `/insights` | 進化生成は戦略へ、パターンはインサイトへ |
| `/history` (履歴) | `/insights` | インサイトのタブに統合 |

---

## 8. 実装計画

### Phase 1: コア体験の構築

1. **DefaultSwot テーブル追加**
   - Prismaスキーマ更新
   - 開発者用の更新API作成

2. **ダッシュボード (`/`) 再設計**
   - SWOT表示セクション
   - 問い入力（SWOT候補付き）
   - 活動サマリー

3. **結果詳細 (`/results/[id]`) 新規作成**
   - 探索APIとの接続
   - 採否UI

### Phase 2: 機能統合

4. **戦略一覧 (`/strategies`) 作成**
   - 採用戦略タブ
   - ランキングタブ
   - 進化生成タブ

5. **インサイト (`/insights`) 作成**
   - 探索履歴タブ
   - 学習パターンタブ
   - メタ分析タブ

6. **設定 (`/settings`) 作成**
   - コア情報タブ
   - スコア設定タブ
   - 外観タブ

### Phase 3: 移行と整理

7. **旧ページからのリダイレクト**
8. **不要ページの削除**
9. **テスト・調整**

---

## 9. 開発者向け: SWOT管理

### 9.1 デフォルトSWOT更新API

```
POST /api/admin/swot
Authorization: Bearer <admin_token>

{
  "strengths": ["データ連携基盤", "顧客基盤", "海運ノウハウ"],
  "weaknesses": ["人材不足", "ブランド認知度"],
  "opportunities": ["生成AIブーム", "脱炭素需要", "物流DX"],
  "threats": ["競合参入", "規制強化"],
  "summary": "データと顧客基盤を活かし、AI・脱炭素領域で..."
}
```

### 9.2 更新フロー

1. 開発者が分析を実施（外部ツール or 手動）
2. 結果をAPIで登録
3. ダッシュボードに自動反映
4. 全ユーザーが最新SWOTを参照して探索

---

## 10. 実装完了ステータス（2026/01/22）

### Phase 1: コア体験の構築 ✅ 完了

| タスク | ステータス |
|--------|----------|
| DefaultSwot テーブル追加 | ✅ 完了 |
| デフォルトSWOT管理API (`/api/admin/swot`) | ✅ 完了 |
| ダッシュボード (`/`) 再設計 | ✅ 完了 |
| 初期SWOTデータ登録 | ✅ 完了 |

### Phase 2: 機能統合 ✅ 完了

| タスク | ステータス |
|--------|----------|
| 戦略一覧 (`/strategies`) 作成 | ✅ 完了 |
| インサイト (`/insights`) 作成 | ✅ 完了 |
| 設定 (`/settings`) 作成 | ✅ 完了 |
| AI自動探索タブ追加 | ✅ 完了 |

### Phase 3: 移行と整理 ✅ 完了

| タスク | ステータス |
|--------|----------|
| 旧ページの削除 | ✅ 完了（削除を選択） |
| ダッシュボードの旧ページリンク削除 | ✅ 完了 |
| 探索後のリダイレクト先変更 | ✅ 完了（`/insights?tab=history`へ） |
| 統合テスト | ✅ 完了（26/26 成功） |

---

## 11. 最終ページ構成（4ページ）

| ページ | URL | タブ構成 |
|--------|-----|----------|
| ダッシュボード | http://localhost:3000/ | SWOT確認 + 問い入力 + 活動サマリー |
| 戦略一覧 | http://localhost:3000/strategies | 採用した戦略 / ランキング / 進化生成 / AI自動探索 |
| インサイト | http://localhost:3000/insights | 探索履歴 / 学習パターン / メタ分析 |
| 設定 | http://localhost:3000/settings | コア情報 / スコア設定 / 外観 |

### 削除した旧ページ（404を返す）

| 旧ページ | 統合先 |
|----------|--------|
| `/explore` | `/` (ダッシュボード) |
| `/ranking` | `/strategies` (ランキングタブ) |
| `/learning` | `/insights` (パターンタブ) + `/strategies` (進化生成タブ) |
| `/history` | `/insights` (履歴タブ) |
| `/core` | `/settings` (コア情報タブ) |
| `/swot` | `/` (ダッシュボード) |

---

## 12. テスト結果

### 統合テスト（26件）

| カテゴリ | テスト数 | 結果 |
|---------|---------|------|
| ダッシュボード | 4 | ✅ |
| 戦略一覧 | 4 | ✅ |
| インサイト | 4 | ✅ |
| 設定 | 4 | ✅ |
| ナビゲーション | 3 | ✅ |
| レスポンシブ | 2 | ✅ |
| ダークモード | 1 | ✅ |
| 旧ページ404確認 | 4 | ✅ |

テストファイル: `tests/integration.spec.ts`
